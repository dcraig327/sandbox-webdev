# Загрузка видимых изображений

[importance 4]

Задача, которая описана ниже, демонстрирует результативный метод оптимизации страницы.

С целью экономии трафика и более быстрой загрузки страницы изображения на ней заменяются на "макеты".

Вместо такого изображения:

```html
<img src="yozhik.jpg" width="128" height="128">
```

<img src="http://js.cx/clipart/yozhik.jpg" width="128" height="128">


Стоит вот такое:

```html
<img *!*src="1.gif"*/!* width="128" height="128" *!*realsrc="yozhik.jpg"*/!*>
```

<img src="http://js.cx/lazyimg/1.gif" width="128" height="128">

То есть настоящий URL находится в атрибуте `realsrc` (название атрибута можно выбрать любое). А в `src` поставлен серый GIF размера 1x1, и так как `width/height` правильные, то он растягивается, так что вместо изображения виден серый прямоугольник. 

При этом, чтобы браузер загрузил изображение, нужно заменить значение `src` на то, которое находится в `realsrc`.

**Если страница большая, то замена больших изображений на такие макеты существенно убыстряет полную загрузку страницы.** Это особенно заметно в случае, когда на странице много анонсов новостей с картинками или изображений товаров, из которых многие находятся за пределами прокрутки.

 Кроме того, для мобильных устройств JavaScript может подставлять URL уменьшенного варианта картинки.

**Напишите код, который при прокрутке окна загружает ставшие видимыми изображения.** То есть, как только изображение попало в видимую часть документа -- в `src` нужно прописать правильный URL из `realsrc`. 

Работать должно так: <a target="_blank" href="/files/tutorial/browser/events/lazyimg/index.html">открыть работающую страницу в новом окне</a>.

<ul>
<li>При начальной загрузке некоторые изображения должны быть видны сразу, до прокрутки. Код должен это учитывать.</li>
<li>Некоторые изображения могут быть обычными, без `realsrc`. Их код не должен трогать вообще.</li>
<li>Также код не должен перегружать уже показанное изображение.</li>
</ul>

**Дополнительно: расширьте код, чтобы загружались изображения не только видимые сейчас, но и на страницу вперед и назад от текущего места.**

[edit src="task" task/]


P.S. Страница прокручивается только вверх или вниз, горизонтальной прокрутки нет.