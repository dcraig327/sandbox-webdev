# Переменные: let и const

В ES-2015 предусмотрены новые способы объявления переменных: через `let` и `const` вместо `var`.

Например:
```js
let a = 5;
```

## let

У объявлений `let` три основных отличия от `var`:

<ol>
<li>**Область видимости переменной `let` -- блок `{...}`.**

Как мы помним, переменная, объявленная через `var`, видна везде в функции. В старом стандарте минимальная "область видимости" -- функция.

Переменная, объявленная через `let`, видна только в рамках блока `{...}`, в котором объявлена.

Это, в частности, влияет на объявления внутри `if`, `while` или `for`.

Например, переменная через `var`:

```js
//+ run 
'use strict';

var apples = 5; 

if (true) {
  var apples = 10;

  alert(apples); // 10 (внутри блока)
}

alert(apples); // 10 (снаружи блока то же самое)
```

То же самое с `let`:

```js
//+ run 
'use strict';

let apples = 5; // (*)

if (true) {
  let apples = 10;

  alert(apples); // 10 (внутри блока)
}

*!*
alert(apples); // 5 (снаружи блока значение не изменилось)
*/!*
```

Здесь, фактически, две независимые переменные `apples`, одна -- глобальная, вторая -- в блоке `if`.

Заметим, что если объявление `apples` в строке `(*)` закомментировать, то в последнем `alert` будет ошибка: переменная неопределена. Это потому что переменная `let` всегда видна именно в том блоке, где объявлена и не более.

</li>
<li>**Переменная `let` не видна до объявления.**

Как мы помним, переменные `var` существуют и до объявления. Они равны `undefined`:

```js
//+ run
'use strict';

alert(a); // undefined

var a = 5;
```

С переменными `let` всё проще. До объявления их вообще нет.

Такой доступ приведёт к ошибке:
```js
//+ run
'use strict';

*!*
alert(a); // ошибка, нет такой переменной
*/!*

let a = 5;
```
</li>
<li>**При использовании в цикле, для каждой итерации создаётся своя переменная.**

Объявление `let` позволяет легко решить классическую проблему с замыканиями, описанную в задаче [](/task/make-army).

```js
//+ run
'use strict';

function makeArmy() {

  let shooters = [];

  for (*!*let*/!* i = 0; i < 10; i++) {
    shooters.push(function() {
      alert( i ); // выводит свой номер
    });
  }

  return shooters;
}

var army = makeArmy();

army[0](); // 0
army[5](); // 5
```

Если бы объявление было `var i`, то была бы одна переменная `i` на всю функцию, и вызовы в последних строках выводили бы `10` (подробнее -- см. задачу [](/task/make-army)). 

Объявление `let i` создаёт для каждого повторения блока в цикле свою переменную.
</li>
</ol>

# const

По области видимости -- это то же самое, что `let`, но константа, нельзя менять:

```js
//+ run
'use strict';

const apple = 5;
apple = 10; // ошибка
```



